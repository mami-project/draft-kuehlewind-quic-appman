<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Applicability and Management of the QUIC Transport Protocol</title>

  
<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    padding: 0 1em;
    z-index: 1;
  }
  #rfc\.toc {
    top: 16px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-left: 1.5em;
    padding-right: 29em;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 2.5em auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc ul {
  margin: 0;
}
/* xml2rfc nests ul directly inside ul which messes with the style badly */
ul.toc, ul.toc>ul, ul.toc ul>ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
/*]]>*/</style>


  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Open Issues"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Introduction"/>
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Notational Conventions"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Applicability of QUIC"/>
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 The Necessity of TCP Fallback"/>
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Zero RTT: Here There Be Dragons"/>
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Stream versus Flow Multiplexing"/>
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Prioritization"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Manageability of QUIC"/>
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 QUIC Public Header Structure"/>
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Integrity Protection of the Wire Image"/>
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Connection ID and Rebinding"/>
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Packet Numbers"/>
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Stateful Treatment of QUIC Traffic"/>
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations"/>
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgments"/>
<link href="#rfc.references" rel="Chapter" title="8 References"/>
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.5.1 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Kuehlewind, M. and B. Trammell" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-kuehlewind-quic-appman-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2017-3-08" />
  <meta name="dct.abstract" content="This document discusses the applicability and manageability of the QUIC transport protocol, focusing on caveats impacting application protocol development and deployment over QUIC, and network operations involving QUIC traffic." />
  <meta name="description" content="This document discusses the applicability and manageability of the QUIC transport protocol, focusing on caveats impacting application protocol development and deployment over QUIC, and network operations involving QUIC traffic." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">Network Working Group</td>
  <td class="right">M. Kuehlewind</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">B. Trammell</td>
</tr>
<tr>
  <td class="left">Intended status: Informational</td>
  <td class="right">ETH Zurich</td>
</tr>
<tr>
  <td class="left">Expires: September 9, 2017</td>
  <td class="right">March 08, 2017</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Applicability and Management of the QUIC Transport Protocol<br />
  <span class="filename">draft-kuehlewind-quic-appman-latest</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This document discusses the applicability and manageability of the QUIC transport protocol, focusing on caveats impacting application protocol development and deployment over QUIC, and network operations involving QUIC traffic.</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 9, 2017.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2017 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Open Issues</a></li>
<li>2.   <a href="#rfc.section.2">Introduction</a></li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Notational Conventions</a></li>
</ul><li>3.   <a href="#rfc.section.3">Applicability of QUIC</a></li>
<ul><li>3.1.   <a href="#rfc.section.3.1">The Necessity of TCP Fallback</a></li>
<li>3.2.   <a href="#rfc.section.3.2">Zero RTT: Here There Be Dragons</a></li>
<li>3.3.   <a href="#rfc.section.3.3">Stream versus Flow Multiplexing</a></li>
<li>3.4.   <a href="#rfc.section.3.4">Prioritization</a></li>
</ul><li>4.   <a href="#rfc.section.4">Manageability of QUIC</a></li>
<ul><li>4.1.   <a href="#rfc.section.4.1">QUIC Public Header Structure</a></li>
<li>4.2.   <a href="#rfc.section.4.2">Integrity Protection of the Wire Image</a></li>
<li>4.3.   <a href="#rfc.section.4.3">Connection ID and Rebinding</a></li>
<li>4.4.   <a href="#rfc.section.4.4">Packet Numbers</a></li>
<li>4.5.   <a href="#rfc.section.4.5">Stateful Treatment of QUIC Traffic</a></li>
</ul><li>5.   <a href="#rfc.section.5">IANA Considerations</a></li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a></li>
<li>7.   <a href="#rfc.section.7">Acknowledgments</a></li>
<li>8.   <a href="#rfc.references">References</a></li>
<ul><li>8.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a></li>
</ul><li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#open-issues" id="open-issues">Open Issues</a></h1>
<p id="rfc.section.1.p.1">From the minutes of the QUIC interim on 26 Jan:</p>
<p/>

<ul>
  <li>note fallback might not be TCP, or might be omitted by an application</li>
  <li>split the document in two: applicability, and manageability</li>
  <li>managament document should address awareness that different applications / users / communities  have different requirements on information exposure.</li>
</ul>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#introduction" id="introduction">Introduction</a></h1>
<p id="rfc.section.2.p.1">QUIC <a href="#I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</a> is a new transport protocol currently under development in the IETF quic working group, focusing on support of semantics as needed for HTTP/2 <a href="#I-D.ietf-quic-http">[I-D.ietf-quic-http]</a> such as stream-multiplexing to avoid head-of-line blocking. Based on current deployment practices, QUIC is encapsulated in UDP and encrypted by default. This means the version of QUIC that is currently under development will integrate TLS 1.3 <a href="#I-D.ietf-quic-tls">[I-D.ietf-quic-tls]</a> to encrypt all payload data including all header information needed for for stream-multiplexing and most on the  other header information. Given QUIC is an end-to-end transport protocol, all information in the protocol header is not meant to be mutable by the network, and will therefore be integrity- protected to the extent possible.</p>
<p id="rfc.section.2.p.2">This document serves two purposes:</p>
<p/>

<ol>
  <li>It provides guidance for application developers that want to use the QUIC protocol without implementing it on their own. This includes general guidance for application use of HTTP/2 over QUIC as well as the use of other application layer protocols over QUIC. For specific guidance on how to integrate HTTP/2 with QUIC, see <a href="#I-D.ietf-quic-http">[I-D.ietf-quic-http]</a>.</li>
  <li>It provides guidance for network operation and management of QUIC traffic.  This includes guidance on how to interpret and utilize information that is exposed by QUIC to the network as well as explaining requirement and assumption that the QUIC protocol design takes toward the expected network treatment.</li>
</ol>
<h1 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a> <a href="#notational-conventions" id="notational-conventions">Notational Conventions</a></h1>
<p id="rfc.section.2.1.p.1">The words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;SHOULD&#8221;, and &#8220;MAY&#8221; are used in this document.  It&#8217;s not shouting; when they are capitalized, they have the special meaning defined in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#applicability-of-quic" id="applicability-of-quic">Applicability of QUIC</a></h1>
<p id="rfc.section.3.p.1">In the following subsections we discuss specific caveats to QUIC&#8217;s applicability, and issues that application developers must consider when using QUIC as a transport for their application.</p>
<h1 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a> <a href="#the-necessity-of-tcp-fallback" id="the-necessity-of-tcp-fallback">The Necessity of TCP Fallback</a></h1>
<p id="rfc.section.3.1.p.1">[EDITOR&#8217;S NOTE: note that fallback might not be TCP; e.g. for DNS over QUIC, fallback is straight DNS. note that some applications might choose no fallback]</p>
<p id="rfc.section.3.1.p.2">QUIC uses UDP as a substrate for userspace implementation and port numbers for NAT and middlebox traversal. While there is no evidence of widespread, systematic disadvantage of UDP traffic compared to TCP in the Internet <a href="#Edeline16">[Edeline16]</a>, somewhere between three <a href="#Trammell16">[Trammell16]</a> and five <a href="#Swett16">[Swett16]</a> percent of networks simply block UDP traffic. All applications running on top of QUIC must therefore either be prepared to accept connectivity failure on such networks, or be engineered to fall back to TLS, or TLS-equivalent crypto, over TCP. These applications must operate, perhaps with impaired functionality, in the absence of features provided by QUIC not present in TLS over TCP:  The most obvious difference is that TCP does not stream multiplexing and there stream multiplex would need to be implemented in the application layer if needed. Further, TCP by default does not support 0-RTT session resumption. TCP Fast Open can be used but might no be supported by the far end or could be blocked on the network path. Note that there is at least evidence of middleboxes blocking SYN data even if TFO was successfully negotiated. Moreover, while encryption (in this case TLS) is inseparable integrated with QUIC, TLS negotiation over TCP can be blocked. In case it is RECOMMENDED to abort the connection.</p>
<p id="rfc.section.3.1.p.3">We hope that the deployment of a proposed standard version of the QUIC protocol will provide an incentive for these networks to permit QUIC traffic.  Indeed, the ability to treat QUIC traffic statefully as in <a href="#statefulness">Section 4.5</a> removes one network management incentive to block this traffic.</p>
<h1 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a> <a href="#zero-rtt" id="zero-rtt">Zero RTT: Here There Be Dragons</a></h1>
<p id="rfc.section.3.2.p.1">QUIC provides for 0-RTT connection establishment (see section 3.2 of <a href="#I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</a>). However, data in the frames contained in the first packet of a such a connection must be treated specially by the application layer. Since a retransmission of these frames resulting from a lost acknowledgment may cause the data to appear twice, either the application- layer protocol has to be designed such that all such data is treated as idempotent, or there must be some application-layer mechanism for recognizing spuriously retransmitted frame and dropping them.</p>
<p id="rfc.section.3.2.p.2">[EDITOR&#8217;S NOTE: discuss defenses against replay attacks using 0-RTT data.]</p>
<h1 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a> <a href="#stream-versus-flow-multiplexing" id="stream-versus-flow-multiplexing">Stream versus Flow Multiplexing</a></h1>
<p id="rfc.section.3.3.p.1">QUIC&#8217;s stream multiplexing feature allows applications to run multiple streams over a single connection, without head-of-line blocking between streams, associated at a point in time with a single five-tuple. Streams are meaningful only to the application; since stream information is carried inside QUIC&#8217;s encryption boundary, no information about the stream(s) whose frames are carried by a given packet is visible to the network.</p>
<p id="rfc.section.3.3.p.2">Stream multiplexing is not intended to be used for differentiating streams in terms of network treatment. Application traffic requiring different network treatment should therefore be carried over different five-tuples (i.e.  multiple QUIC connections). Given QUIC&#8217;s ability to send application data on the first packet of a connection (if a previous connection to the same host has been successfully established to provide the respective credentials), the cost for establishing another connection are extremely low.</p>
<p id="rfc.section.3.3.p.3">[EDITOR&#8217;S NOTE: For discussion: If establishing a new connection does not seem to be sufficient, the protocol&#8217;s rebinding functionality (see section 3.7 of <a href="#I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</a>) could be extended to allow multiple five-tuples to share a connection ID simultaneously, instead of sequentially.]</p>
<h1 id="rfc.section.3.4"><a href="#rfc.section.3.4">3.4.</a> <a href="#prioritization" id="prioritization">Prioritization</a></h1>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#manageability-of-quic" id="manageability-of-quic">Manageability of QUIC</a></h1>
<p id="rfc.section.4.p.1">This section discusses those aspects of the QUIC transport protocol that have an impact on the design and operation of devices that forward QUIC packets.  This section is concerned primarily with QUIC&#8217;s unencrypted wire image, which we define as the information available in the packet header in each QUIC packet, and the dynamics of that information.</p>
<p id="rfc.section.4.p.2">QUIC is a versioned protocol. Everything about the header format can change except the mechanism by which a receiver can determine whether and where a version number is present, and the meaning of the version number field itself.</p>
<p id="rfc.section.4.p.3">The rest of this document is concerned with the public header structure of the version of the QUIC transport document that is current as of this writing.</p>
<h1 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a> <a href="#public-header" id="public-header">QUIC Public Header Structure</a></h1>
<p id="rfc.section.4.1.p.1">In the current version of the QUIC protocol, the following information are optionally exposed in the QUIC header:</p>
<p/>

<ul>
  <li>flags: All QUIC packets have one byte of flags at the beginning of their header. The definition of these flags can change with the version of QUIC, expect for the version flag that indicated that the version number is present in the QUIC header. Other bits of the flag field in the current version of QUIC are the connection ID flag, the packet number size field, the public reset flag, and the key phase flag.</li>
  <li>version number: The version number is present if the version bit in the flags field is set. The version flag is always set in the first packet of a connection but could also be set in other packets.</li>
  <li>connection ID: The connection ID is present if the connection ID bit in the flag field is set. The connection ID flag is always set on the first packet of a connection and can be set on others. Further the connection ID flag is always set when the public reset bit is set as well. QUIC connections are resistant to IP address changes. Therefore if exposed, the same connection ID can occur in QUIC packet with different 5-tuples, indicating that this QUIC packet belongs to the same connection.</li>
  <li>packet number: The packet number is variable length as indicated by packet number size field. If the length is indicated as zero the packet number is not present. If the public reset flag is set, the packet number cannot be present.</li>
</ul>
<h1 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a> <a href="#wire-integrity" id="wire-integrity">Integrity Protection of the Wire Image</a></h1>
<p id="rfc.section.4.2.p.1">All information in the QUIC header, even if exposed to the network, is integrity protected, therefore a device on the network path MUST not change these information. Altering of header information would fail any integrity check, leading to packet drop at the receiver.</p>
<h1 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a> <a href="#rebinding" id="rebinding">Connection ID and Rebinding</a></h1>
<p id="rfc.section.4.3.p.1">A flow might change one of its IP addresses but keep the same connection ID, as discussed in <a href="#public-header">Section 4.1</a>. [EDITOR&#8217;S NOTE: What does that mean for the network, if anything (given the connection ID is only rarely present)?]</p>
<h1 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4.</a> <a href="#packet-numbers" id="packet-numbers">Packet Numbers</a></h1>
<p id="rfc.section.4.4.p.1">Packet numbers are monotonically increasing. Packets containing retransmissions as well as packets containing only control information, such as acknowledgments, will get a new packet numbers. Therefore pure control and retransmission packets are impossible to distinguish on the wire.</p>
<p id="rfc.section.4.4.p.2">While loss detection in QUIC is still based on packet numbers, congestion control by default provides richer information than vanilla TCP does.  Especially, QUIC does not rely on duplicated ACKs, making it more tolerant of packet re-ordering.</p>
<p id="rfc.section.4.4.p.3">[EDITOR&#8217;S NOTE: packet numbers could be skipped; name cases where this is proposed and advise to monitor average link loss rate and disregard overly high loss rates]</p>
<p id="rfc.section.4.4.p.4">[EDITORS&#8217;S NOTE: Also for multipath: would packet number be shared in this case?]</p>
<h1 id="rfc.section.4.5"><a href="#rfc.section.4.5">4.5.</a> <a href="#statefulness" id="statefulness">Stateful Treatment of QUIC Traffic</a></h1>
<p id="rfc.section.4.5.p.1">Stateful network devices such as firewalls use exposed header information to support state setup and tear-down. In-line with <a href="#I-D.trammell-plus-statefulness">[I-D.trammell-plus-statefulness]</a> (which provides a general model for in- network state management), the presence of a Connection ID on QUIC traffic can be used as an association/confirmation signal; QUIC&#8217;s public reset may be used as a partial one-way stop signal.</p>
<p id="rfc.section.4.5.p.2">[EDITOR&#8217;S NOTE: note public reset changes for state management may be desirable: two-way stop as in <a href="#I-D.trammell-plus-statefulness">[I-D.trammell-plus-statefulness]</a> has nice properties.]</p>
<p id="rfc.section.4.5.p.3">[EDITOR&#8217;S NOTE: is the first packet spcial? It can probably be identified but don&#8217;t misuse this information&#8230;?] ## Measuring QUIC Traffic</p>
<p id="rfc.section.4.5.p.4">Given packet numbers can be expected to be exposed on most packets (expect public reset but that terminates the connection anyway), packet numbers can be used by the network to measure loss that occurred between the sender and the measurement point in the network. Similarly, out-of-order packets indicate upstream reordering. Unlike with TCP, there is no way to measure downstream loss and RTT passively.</p>
<p id="rfc.section.4.5.p.5">[EDITOR&#8217;S NOTE: the addition of a simple packet number echo would allow passive RTT measurement and partial passive downstream loss/reordering measurement. Packet number echo can be sampled at the echo-side (i.e. one-in-N packets or 1/p packets can carry an echo) for efficiency tradeoff, if necessary.]</p>
<p id="rfc.section.4.5.p.6">[EDITOR&#8217;S NOTE: in-network devices can inspect and correlate connection IDs for partial tracking of mobility events.]</p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a></h1>
<p id="rfc.section.5.p.1">This document has no actions for IANA.</p>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a></h1>
<p id="rfc.section.6.p.1">Especially security- and privacy-relevant applicability and manageability considerations are given in <a href="#zero-rtt">Section 3.2</a>, <a href="#wire-integrity">Section 4.2</a>, and <a href="#rebinding">Section 4.3</a>.</p>
<h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#acknowledgments" id="acknowledgments">Acknowledgments</a></h1>
<p id="rfc.section.7.p.1">This work is partially supported by the European Commission under Horizon 2020 grant agreement no. 688421 Measurement and Architecture for a Middleboxed Internet (MAMI), and by the Swiss State Secretariat for Education, Research, and Innovation under contract no. 15.0268. This support does not imply endorsement.</p>
<h1 id="rfc.references"><a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</b>
      </td>
      <td class="top"><a>Iyengar, J.</a> and <a>M. Thomson</a>, "<a href="http://tools.ietf.org/html/draft-ietf-quic-transport-01">QUIC: A UDP-Based Multiplexed and Secure Transport</a>", Internet-Draft draft-ietf-quic-transport-01, January 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="Edeline16">[Edeline16]</b>
      </td>
      <td class="top"><a>Edeline, K.</a>, <a>Kuehlewind, M.</a>, <a>Trammell, B.</a>, <a>Aben, E.</a> and <a>B. Donnet</a>, "<a>Using UDP for Internet Transport Evolution (arXiv preprint 1612.07816)</a>", December 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-quic-http">[I-D.ietf-quic-http]</b>
      </td>
      <td class="top"><a>Bishop, M.</a>, "<a href="http://tools.ietf.org/html/draft-ietf-quic-http-01">Hypertext Transfer Protocol (HTTP) over QUIC</a>", Internet-Draft draft-ietf-quic-http-01, January 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-quic-tls">[I-D.ietf-quic-tls]</b>
      </td>
      <td class="top"><a>Thomson, M.</a> and <a>S. Turner</a>, "<a href="http://tools.ietf.org/html/draft-ietf-quic-tls-01">Using Transport Layer Security (TLS) to Secure QUIC</a>", Internet-Draft draft-ietf-quic-tls-01, January 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.trammell-plus-statefulness">[I-D.trammell-plus-statefulness]</b>
      </td>
      <td class="top"><a>Kuehlewind, M.</a>, <a>Trammell, B.</a> and <a>J. Hildebrand</a>, "<a href="http://tools.ietf.org/html/draft-trammell-plus-statefulness-02">Transport-Independent Path Layer State Management</a>", Internet-Draft draft-trammell-plus-statefulness-02, December 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="Swett16">[Swett16]</b>
      </td>
      <td class="top"><a>Swett, I.</a>, "<a>QUIC Deployment Experience at Google (IETF96 QUIC BoF presentation)</a>", July 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="Trammell16">[Trammell16]</b>
      </td>
      <td class="top"><a>Trammell, B.</a> and <a>M. Kuehlewind</a>, "<a>Internet Path Transparency Measurements using RIPE Atlas (RIPE72 MAT presentation)</a>", May 2016.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mirja Kuehlewind</span> 
	  <span class="n hidden">
		<span class="family-name">Kuehlewind</span>
	  </span>
	</span>
	<span class="org vcardline">ETH Zurich</span>
	<span class="adr">
	  <span class="vcardline">Gloriastrasse 35</span>

	  <span class="vcardline">
		<span class="locality">8092 Zurich</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Switzerland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mirja.kuehlewind@tik.ee.ethz.ch">mirja.kuehlewind@tik.ee.ethz.ch</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Brian Trammell</span> 
	  <span class="n hidden">
		<span class="family-name">Trammell</span>
	  </span>
	</span>
	<span class="org vcardline">ETH Zurich</span>
	<span class="adr">
	  <span class="vcardline">Gloriastrasse 35</span>

	  <span class="vcardline">
		<span class="locality">8092 Zurich</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Switzerland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ietf@trammell.ch">ietf@trammell.ch</a></span>

  </address>
</div>

</body>
</html>
